{% extends 'main.html' %}

{% block content %}

<style>
    .home-container{
        display: grid;
        grid-template-columns: 1fr 3fr 1fr; /*we have created 3 columuns which take 1 fraction and 3 fraction of the screen */
    }
</style>

<!-- <h1>Home page sup ikshu</h1> -->

<div class="home-container">

    <div>
        <h3>Browse Topics</h3>
        <hr>
        <a href="{% url 'home'  %}">ALL</a>
        {% for topic in topics %}

            <div>
                 <a href="{% url 'home'  %}?q={{topic.name}}">{{topic.name}}</a> <!--by this q in href, we are adding a query, so that means when you click any of the topics it will stay on home page only but also it will lead to particular topic query -->
            </div>
        {% endfor %}
    </div>

    <div>

        <h5>{{room_count}} rooms available</h5>
        <a href="{% url 'create-room' %}">Create Room</a>
        <div>
            {% for room in rooms %}
            <div>
                {% if request.user == room.host %}
                <a href=" {% url 'update-room' room.id %} ">Edit</a>
                <a href="{% url 'delete-room' room.id %}">Delete</a>
                {% endif %}
                <span>@{{room.host.username}}</span>
                <h5>{{room.id}} -- <a href="/room/{{room.id}}">{{room.name}}</a></h5>
                <small>{{room.topic.name}}</small>
                <hr>
            </div>
            {% endfor %}
        </div>


    </div>

    <div>
        <h3>Recent Activity</h3>
        <hr>
        {% for message in room_messages %}
            <div>
                <small>@{{message.user}}  {{message.created|timesince}} ago</small>
                <small>Replied to "{{message.room}}"</small>

                <p>{{message}}</p><!--  here we wrote only message instead of message.body so that the whole message is not displayed and only the first 50 characters are returned as in message model, it returns self.body [0:50] -->
                
                {% if request.user == message.user %}
                    <a href="{% url 'delete-message' message.id %}">Delete</a>
                {% endif %}
            </div>
        {% endfor %}
    </div>

</div>
{% endblock content %}